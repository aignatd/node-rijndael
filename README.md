node-rijndael
=============

A native binding to mcrypt's rijndael encryption with a block size of 256 bits. This allows for the encryption and decryption of data generated by Drupal, which uses rijndael-256, despite the AES standard of rijndael-128.

This module enables interfacing between PHP and Node.js, especially where third-party frameworks like Drupal are involved. Drupal uses rijndael-256 by default, and OPENSSL has no support for any block-side of rijndael apart from 128.

Installation
============

As of version `0.3.0`, libmcrypt is packaged with node-rijndael: you no longer need to install the development version of libmcrypt.

[npm][]
-------

```sh
$ npm install node-rijndael
```

[github][]
----------

```sh
$ git clone https://github.com/skeggse/node-rijndael.git
$ cd node-rijndael
$ node-gyp
```

API
===

As of `0.1.0`, `node-rijndael` will coerce strings into buffers. As of `0.2.0`, `node-rijndael` pads keys and allows key lengths of 16, 24 and 32 bytes.

new Rijndael(key, [options])
-----------------------------

The constructor creates a Rijndael object bound to a specific key, with methods for encrypting and decrypting.

The provided key can be either a `Buffer` or a `string`, and if a string is provided, the `encoding` option will be passed to the `Buffer` constructor.

### Options

```
{
  "encoding": "binary" // default, specifies the key encoding, if applicable
  "mode": Rijndael.MCRYPT_MODE_ECB, // default, the block cipher mode
  "iv": null // default, the initialization vector (uses encoding if a string)
}
```

Rijndael#encrypt(plaintext, [input_encoding, [output_encoding]])
---------------------------

Encrypt the provided `plaintext` with the bound key, and return the encrypted `ciphertext`. `encrypt` will return a `Buffer` by default.

May throw an error if unsupported options provided. Most of the checking should happen in the constructor.

Rijndael#decrypt(ciphertext, [input_encoding, [output_encoding]])
---------------------------

Decrypt the provided `ciphertext` with the bound key, and return the decrypted `plaintext`. `decrypt` will return a `Buffer` by default.

May throw an error if unsupported options provided. Most of the checking should happen in the constructor.

TODO
====

A bit more functionality now, needs tests.

[encrypt]: https://github.com/skeggse/node-rijndael#rijndaelencryptplaintext-key
[decrypt]: https://github.com/skeggse/node-rijndael#rijndaeldecryptciphertext-key
[npm]: http://npmjs.org/package/node-rijndael "node-rijndael on npm"
[github]: https://github.com/skeggse/node-rijndael "node-rijndael on github"
